<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffd1df" />
  <title>Valentine Edition üíò</title>

  <style>
    :root{
      --pink0:#fff2f7;
      --pink1:#ffd1df;
      --pink2:#ffb4cc;
      --rose:#e1174f;
      --rose2:#ff2d6b;
      --ink:#2a1f24;

      --shadow: 0 26px 70px rgba(0,0,0,.18);
      --shadow2: 0 16px 40px rgba(0,0,0,.12);

      --r: 22px;
      --ease: cubic-bezier(.2,.8,.2,1);
      --ease2: cubic-bezier(.2,.7,.2,1);

      --serif: ui-serif, "Times New Roman", Times, Georgia, serif;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;

      --line: rgba(225,23,79,.65);
      --line2: rgba(225,23,79,.28);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color: var(--ink);
      font-family: var(--sans);
      overflow:hidden;
      background: linear-gradient(135deg, var(--pink0), var(--pink1));
    }

    /* =========================
       FONDO CON MOVIMIENTO
    ========================== */
    .bg-aurora{
      position: fixed; inset:-22%;
      z-index:-5;
      background:
        radial-gradient(900px 560px at 18% 20%, rgba(225,23,79,.28), transparent 60%),
        radial-gradient(900px 560px at 85% 30%, rgba(255,255,255,.70), transparent 60%),
        radial-gradient(900px 560px at 55% 90%, rgba(255,45,107,.20), transparent 60%),
        linear-gradient(135deg, var(--pink0), var(--pink1));
      filter: saturate(1.10);
      animation: auroraDrift 9s var(--ease2) infinite alternate;
    }
    @keyframes auroraDrift{
      from{ transform: translate3d(-1.7%, -1.1%, 0) scale(1.03); }
      to  { transform: translate3d( 1.7%,  1.2%, 0) scale(1.10); }
    }

    .bg-grain{
      position: fixed; inset:-30%;
      z-index:-4;
      opacity:.16;
      background-image:
        repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0px, rgba(0,0,0,.05) 1px, transparent 2px, transparent 6px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.04) 0px, rgba(0,0,0,.04) 1px, transparent 2px, transparent 7px);
      mix-blend-mode: multiply;
      animation: grainMove 7s linear infinite;
    }
    @keyframes grainMove{
      0%   { transform: translate3d(-2%, -2%, 0) rotate(0deg); }
      100% { transform: translate3d( 2%,  2%, 0) rotate(1deg); }
    }

    /* P√©talos */
    .petals{
      position: fixed; inset:-10%;
      z-index:-3;
      pointer-events:none;
    }
    .petal{
      position:absolute;
      width: 14px; height: 14px;
      border-radius: 6px 14px 6px 14px;
      background: rgba(225,23,79,.30);
      filter: blur(.10px);
      box-shadow: 0 10px 22px rgba(225,23,79,.10);
      animation: fall linear infinite;
      transform: rotate(15deg);
    }
    .petal.white{ background: rgba(255,255,255,.72); }
    .petal.soft { background: rgba(255,45,107,.18); }
    @keyframes fall{
      0%   { transform: translate3d(var(--x), -140px, 0) rotate(0deg); opacity:0; }
      10%  { opacity:var(--op); }
      100% { transform: translate3d(calc(var(--x) + var(--drift)), 120vh, 0) rotate(340deg); opacity:0; }
    }

    @media (prefers-reduced-motion: reduce){
      .bg-aurora, .bg-grain, .petal{ animation:none !important; }
    }

    /* =========================
       INTRO: SOBRE / CARTA
    ========================== */
    .intro{
      position: fixed; inset:0;
      z-index: 50;
      display:grid;
      place-items:center;
      padding: 18px;
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(10px);
      transition: opacity .55s var(--ease), transform .55s var(--ease);
    }
    .intro.hide{
      opacity:0;
      transform: translateY(-10px);
      pointer-events:none;
    }

    .introCard{
      width: min(520px, 92vw);
      border-radius: var(--r);
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      padding: 20px 18px 22px;
      text-align:center;
      position:relative;
      overflow:hidden;
    }
    .introTitle{
      font-family: var(--serif);
      color: rgba(225,23,79,.92);
      font-weight: 900;
      font-size: 18px;
      margin: 2px 0 8px;
    }
    .introSub{
      color: rgba(91,73,82,.80);
      font-size: 13.5px;
      margin: 0 0 14px;
    }

    .envWrap{
      position:relative;
      margin: 8px auto 0;
      width: min(360px, 86vw);
      height: 310px;
    }
    .softShadow{
      position:absolute;
      left:50%; bottom: 12px;
      transform: translateX(-50%);
      width: 78%;
      height: 26px;
      background: radial-gradient(closest-side, rgba(0,0,0,.18), transparent 70%);
      filter: blur(2px);
      opacity:.55;
    }
    .letter{
      position:absolute;
      left:50%;
      top: 22px;
      transform: translateX(-50%);
      width: 86%;
      height: 205px;
      background: linear-gradient(180deg, #fffafc, #fff0f6);
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: var(--shadow2);
      padding: 18px 16px 16px;
      z-index: 2;
      transition: transform .75s var(--ease), top .75s var(--ease);
    }
    .letter::before{
      content:"";
      position:absolute;
      inset: 10px;
      border-radius: 12px;
      border: 1px dashed rgba(0,0,0,.10);
      pointer-events:none;
    }
    .letter h2{
      margin: 8px 0 10px;
      font-family: var(--serif);
      font-size: 18px;
      letter-spacing: -0.02em;
      color: rgba(42,31,36,.88);
    }
    .letter p{
      margin: 0;
      color: rgba(91,73,82,.88);
      font-size: 13.5px;
      line-height: 1.45;
    }

    .heartBtn{
      position:absolute;
      left:50%;
      bottom: 52px;
      transform: translateX(-50%);
      width: 68px;
      height: 60px;
      border: 0;
      cursor: pointer;
      background: transparent;
      z-index: 6;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.18));
      -webkit-tap-highlight-color: transparent;
    }
    .heart{
      width: 100%;
      height: 100%;
      position: relative;
      transform: rotate(-45deg);
      background: var(--rose2);
      border-radius: 10px;
      animation: heartPulse 1.1s var(--ease) infinite;
    }
    .heart::before,
    .heart::after{
      content:"";
      position:absolute;
      width: 100%;
      height: 100%;
      background: var(--rose2);
      border-radius: 50%;
    }
    .heart::before{ top: -50%; left: 0; }
    .heart::after { left: 50%; top: 0; }
    @keyframes heartPulse{
      0%,100%{ transform: rotate(-45deg) scale(1); }
      50%    { transform: rotate(-45deg) scale(1.08); }
    }

    .envelope{
      position:absolute;
      left:50%;
      bottom: 0;
      transform: translateX(-50%);
      width: 92%;
      height: 190px;
      border-radius: 18px;
      background: linear-gradient(180deg, #f7a5bc, #f38aaa);
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: var(--shadow2);
      z-index: 3;
      overflow:hidden;
    }
    .flapTop{
      position:absolute;
      left:0; right:0;
      top: 0;
      height: 0;
      border-left: 166px solid transparent;
      border-right: 166px solid transparent;
      border-top: 110px solid #fbd0dc;
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform .75s var(--ease);
      z-index: 5;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.10));
    }
    .flapLeft{
      position:absolute;
      left:0; bottom:0;
      width:0; height:0;
      border-right: 166px solid transparent;
      border-top: 95px solid rgba(255,255,255,.12);
      border-bottom: 95px solid rgba(0,0,0,.03);
      opacity:.45;
      z-index:4;
    }
    .flapRight{
      position:absolute;
      right:0; bottom:0;
      width:0; height:0;
      border-left: 166px solid transparent;
      border-top: 95px solid rgba(255,255,255,.10);
      border-bottom: 95px solid rgba(0,0,0,.02);
      opacity:.40;
      z-index:4;
    }
    .flapBottom{
      position:absolute;
      left:0; right:0;
      bottom:0;
      height:0;
      border-left: 166px solid transparent;
      border-right: 166px solid transparent;
      border-bottom: 110px solid rgba(255,255,255,.18);
      opacity:.55;
      z-index:4;
    }
    .seal{
      position:absolute;
      left: 22px;
      bottom: 16px;
      width: 64px;
      height: 64px;
      border-radius: 999px;
      background: linear-gradient(135deg, #ff2d55, #ff7a98);
      box-shadow: 0 14px 30px rgba(255,45,85,.25);
      display:grid;
      place-items:center;
      z-index: 6;
      transform: rotate(-6deg);
      opacity:.92;
    }
    .seal span{
      color:white;
      font-weight: 900;
      font-size: 12px;
      letter-spacing: .03em;
      user-select:none;
    }

    .introCard.opened .flapTop{ transform: rotateX(160deg); }
    .introCard.opened .letter{
      top: 6px;
      transform: translateX(-50%) translateY(-18px);
    }

    .introHint{
      margin-top: 14px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(255,255,255,.85);
      color: rgba(42,31,36,.70);
      font-weight: 800;
      font-size: 13px;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      user-select:none;
    }

    /* =========================
       REVISTA / P√ÅGINAS
    ========================== */
    .app{
      height:100%;
      display:grid;
      place-items:center;
      padding: 18px;
    }
    .mag{
      width: min(560px, 94vw);
      height: min(980px, 92vh);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.52));
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
      position:relative;
    }
    .mag::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1200px 700px at 30% 10%, rgba(225,23,79,.08), transparent 65%),
        radial-gradient(1200px 700px at 80% 30%, rgba(255,255,255,.55), transparent 65%),
        linear-gradient(180deg, rgba(255,255,255,.20), rgba(0,0,0,.02));
      opacity:.95;
      pointer-events:none;
    }
    .pages{ position:absolute; inset:0; }

    .page{
      position:absolute; inset:0;
      padding: 18px 18px 72px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      opacity:0;
      pointer-events:none;
    }
    .page.active{
      opacity:1;
      pointer-events:auto;
    }

    /* Transiciones */
    .page.anim-in-right{ animation: inRight .45s var(--ease) both; }
    .page.anim-out-left{ animation: outLeft .35s var(--ease) both; }
    .page.anim-in-left{ animation: inLeft .45s var(--ease) both; }
    .page.anim-out-right{ animation: outRight .35s var(--ease) both; }
    @keyframes inRight{ from{opacity:0; transform: translate3d(18px,0,0);} to{opacity:1; transform: translate3d(0,0,0);} }
    @keyframes outLeft{ from{opacity:1; transform: translate3d(0,0,0);} to{opacity:0; transform: translate3d(-18px,0,0);} }
    @keyframes inLeft{ from{opacity:0; transform: translate3d(-18px,0,0);} to{opacity:1; transform: translate3d(0,0,0);} }
    @keyframes outRight{ from{opacity:1; transform: translate3d(0,0,0);} to{opacity:0; transform: translate3d(18px,0,0);} }

    .topline{
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-size: 12px;
      color: rgba(42,31,36,.62);
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .rule{
      height:2px;
      background: var(--line);
      margin: 10px 0 10px;
      opacity:.65;
    }
    .rule.thin{
      height:1px;
      opacity:.45;
      background: var(--line2);
    }

    .masthead{
      text-align:center;
      font-family: var(--serif);
      font-weight: 900;
      letter-spacing: -0.02em;
      color: var(--rose);
      font-size: 46px;
      line-height: 1;
      margin: 8px 0 8px;
    }
    .subhead-row{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      font-size: 12.5px;
      color: rgba(42,31,36,.70);
      text-transform: uppercase;
      letter-spacing: .08em;
      padding: 0 4px;
    }

    .bigQuestion{
      text-align:center;
      margin: 22px 0 10px;
      font-family: var(--serif);
      color: rgba(225,23,79,.92);
    }
    .bigQuestion .small{
      font-size: 24px;
      letter-spacing: .06em;
      text-transform: uppercase;
    }
    .bigQuestion .script{
      font-size: 52px;
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 1;
    }

    .centerNote{
      text-align:center;
      margin: 16px 0 18px;
      color: rgba(42,31,36,.70);
      font-family: var(--serif);
      letter-spacing: .02em;
    }

    .columns{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width: 520px){ .columns{ grid-template-columns: 1fr; } }

    .article{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(225,23,79,.18);
      border-radius: 16px;
      padding: 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
    }
    .article .kicker{
      display:flex;
      justify-content:space-between;
      gap: 12px;
      font-family: var(--serif);
      font-style: italic;
      color: rgba(42,31,36,.72);
      margin-bottom: 8px;
      border-bottom: 1px solid rgba(225,23,79,.18);
      padding-bottom: 8px;
    }
    .article p{
      margin:0;
      font-family: var(--serif);
      color: rgba(42,31,36,.78);
      line-height: 1.55;
      font-size: 15px;
      white-space: pre-line;
    }

    .photo{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(225,23,79,.18);
      border-radius: 16px;
      padding: 10px;
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
    }
    .frame{
      width:100%;
      aspect-ratio: 1 / 1.2;
      border-radius: 12px;
      background:
        radial-gradient(240px 180px at 30% 25%, rgba(225,23,79,.10), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.06), rgba(255,255,255,.35));
      border: 1px solid rgba(225,23,79,.20);
      display:grid;
      place-items:center;
      overflow:hidden;
      position:relative;
    }
    .frame small{
      color: rgba(42,31,36,.55);
      font-weight:700;
      letter-spacing:.02em;
      text-align:center;
      padding: 0 10px;
    }
    .overlayBtn{
      margin-top: 10px;
      display:block;
      width:100%;
      border-radius: 999px;
      border: 2px solid rgba(225,23,79,.55);
      background: rgba(255,255,255,.45);
      color: rgba(225,23,79,.92);
      font-weight: 900;
      padding: 10px 12px;
      text-align:center;
      letter-spacing: .02em;
      user-select:none;
    }

    .tickets{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      align-items:stretch;
    }
    @media (max-width: 520px){ .tickets{ grid-template-columns: 1fr; } }
    .ticket{
      border-radius: 18px;
      border: 1px solid rgba(225,23,79,.25);
      background: rgba(255,255,255,.60);
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
      overflow:hidden;
      display:flex;
      min-height: 86px;
    }
    .ticket .stub{
      width: 78px;
      background: linear-gradient(180deg, rgba(225,23,79,.95), rgba(255,45,107,.85));
      color: rgba(255,255,255,.95);
      padding: 10px 8px;
      font-weight: 900;
      letter-spacing: .08em;
      text-transform: uppercase;
      writing-mode: vertical-rl;
      transform: rotate(180deg);
      text-align:center;
      position:relative;
    }
    .ticket .body{
      flex:1;
      padding: 12px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap: 6px;
    }
    .ticket .body .label{
      color: rgba(42,31,36,.62);
      font-weight: 800;
      letter-spacing:.08em;
      text-transform: uppercase;
      font-size: 11px;
    }
    .ticket .body .value{
      font-family: var(--serif);
      font-weight: 900;
      color: rgba(225,23,79,.92);
      font-size: 18px;
      letter-spacing: -0.01em;
    }

    /* =========================
       PAGE 2: MATRIZ PRO (3x3)
    ========================== */
    .reasonsHead{
      text-align:center;
      margin: 6px 0 10px;
      font-family: var(--serif);
      color: rgba(225,23,79,.95);
    }
    .reasonsTitle{
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1;
    }
    .reasonsTitle .n{ font-size: 58px; }
    .reasonsTitle .t{ font-size: 30px; }
    .reasonsScript{
      margin-top: 6px;
      font-size: 32px;
      font-style: italic;
      font-weight: 900;
      letter-spacing: -0.02em;
      opacity:.92;
    }

    .grid9{
      margin-top: 12px;
      border-radius: 18px;
      background: rgba(255,255,255,.42);
      border: 2px solid rgba(225,23,79,.35);
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
      overflow:hidden;
      position:relative;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
    }
    .grid9::before{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(to right,
          transparent 0%,
          transparent calc(33.333% - 1px),
          rgba(225,23,79,.35) calc(33.333% - 1px),
          rgba(225,23,79,.35) calc(33.333% + 1px),
          transparent calc(33.333% + 1px),
          transparent calc(66.666% - 1px),
          rgba(225,23,79,.35) calc(66.666% - 1px),
          rgba(225,23,79,.35) calc(66.666% + 1px),
          transparent calc(66.666% + 1px),
          transparent 100%
        ),
        linear-gradient(to bottom,
          transparent 0%,
          transparent calc(33.333% - 1px),
          rgba(225,23,79,.35) calc(33.333% - 1px),
          rgba(225,23,79,.35) calc(33.333% + 1px),
          transparent calc(33.333% + 1px),
          transparent calc(66.666% - 1px),
          rgba(225,23,79,.35) calc(66.666% - 1px),
          rgba(225,23,79,.35) calc(66.666% + 1px),
          transparent calc(66.666% + 1px),
          transparent 100%
        );
      pointer-events:none;
      opacity:.95;
    }

    .cell9{
      min-height: 128px;
      padding: 18px 14px 14px;
      display:grid;
      place-items:center;
      text-align:center;
      position:relative;
      font-family: var(--serif);
      color: rgba(42,31,36,.78);
    }
    .cellNum{
      position:absolute;
      top: 10px;
      left: 12px;
      font-size: 22px;
      font-weight: 900;
      color: rgba(225,23,79,.92);
    }
    .cellTxt{
      font-size: 15px;
      line-height: 1.45;
      max-width: 16ch;
    }

    .heartOnly .bigHeart{
      font-size: 40px;
      color: rgba(225,23,79,.92);
      filter: drop-shadow(0 10px 18px rgba(225,23,79,.14));
      opacity:.95;
      animation: floatH 2.2s var(--ease2) infinite alternate;
    }
    @keyframes floatH{
      from{ transform: translateY(0) scale(1); }
      to  { transform: translateY(-4px) scale(1.03); }
    }

    .cell9.center{
      background: radial-gradient(180px 120px at 50% 45%, rgba(225,23,79,.12), transparent 70%);
    }

    .signals{
      margin-top: 14px;
      text-align:center;
      font-family: var(--serif);
      color: rgba(42,31,36,.74);
    }
    .signalsKicker{
      margin-top: 14px;
      font-size: 12px;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: rgba(42,31,36,.55);
      font-weight: 900;
    }
    .signals h3{
      margin: 8px 0 6px;
      color: rgba(225,23,79,.95);
      font-weight: 900;
      font-size: 28px;
      letter-spacing: -0.02em;
    }
    .signals p{ margin:0; font-size: 14px; color: rgba(42,31,36,.65); }

    .redBoxes{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 520px){ .redBoxes{ grid-template-columns: 1fr; } }
    .red{
      border-radius: 16px;
      background: rgba(225,23,79,.92);
      color: rgba(255,255,255,.95);
      padding: 14px 12px;
      font-weight: 800;
      line-height: 1.35;
      box-shadow: 0 12px 24px rgba(225,23,79,.18);
      border: 1px solid rgba(255,255,255,.18);
      font-size: 13.5px;
    }

    /* =========================
       PAGE 3: PREGUNTA + NO PRO
    ========================== */
    .grand{
      text-align:center;
      font-family: var(--serif);
      color: rgba(225,23,79,.95);
      margin: 14px 0 10px;
      font-weight: 900;
      font-size: 34px;
      letter-spacing: -0.02em;
    }
    .paragraph{
      text-align:center;
      font-family: var(--serif);
      color: rgba(42,31,36,.72);
      line-height: 1.6;
      margin: 0 10px;
      font-size: 16px;
      white-space: pre-line;
    }
    .bigAsk{
      margin: 12px 0 8px;
      text-align:center;
      font-family: var(--serif);
      color: rgba(225,23,79,.95);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.05;
    }
    .bigAsk .top{ font-size: 34px; }
    .bigAsk .bottom{ font-size: 40px; font-style: italic; }
    .ask{
      margin-top: 10px;
      text-align:center;
      font-family: var(--serif);
      color: rgba(42,31,36,.70);
      font-size: 16px;
      letter-spacing: .02em;
    }

    .btnStage{
      margin: 16px auto 0;
      width: min(480px, 94%);
      height: 110px;
      border-radius: 18px;
      background: rgba(255,255,255,.38);
      border: 1px solid rgba(225,23,79,.18);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.40);
      position:relative;
      overflow:hidden;
      display:grid;
      place-items:center;
      touch-action: manipulation;
    }

    .choice{
      position:absolute;
      min-width: 170px;
      padding: 14px 16px;
      border-radius: 999px;
      border: 2px solid rgba(225,23,79,.58);
      background: rgba(255,255,255,.58);
      color: rgba(225,23,79,.95);
      font-weight: 900;
      letter-spacing: .02em;
      box-shadow: 0 14px 28px rgba(0,0,0,.08);
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }
    .choice:active{ transform: translate(var(--tx), var(--ty)) scale(.985); }

    .choice.yes{
      z-index: 6;
      left: 50%;
      top: 50%;
      --tx: -112%;
      --ty: -50%;
      transform: translate(-112%, -50%);
    }
    .choice.no{
      z-index: 5;
      border: 0;
      background: rgba(20,20,25,.78);
      color: rgba(255,255,255,.94);
      box-shadow: 0 14px 28px rgba(0,0,0,.12);
      min-width: 120px;
      left: 50%;
      top: 50%;
      transform: translate(12%, -50%);
      will-change: left, top, transform;
    }

    /* =========================
       PAGE 4: FINAL ROM√ÅNTICO
    ========================== */
    .final{
      height: calc(100% - 0px);
      display:grid;
      place-items:center;
      padding-top: 18px;
    }
    .finalCard{
      width: min(460px, 92%);
      border-radius: 24px;
      background: rgba(225,23,79,.88);
      color: rgba(255,255,255,.95);
      box-shadow: 0 22px 60px rgba(225,23,79,.22);
      border: 1px solid rgba(255,255,255,.18);
      padding: 20px 16px 18px;
      text-align:center;
      position:relative;
      overflow:hidden;
    }
    .finalCard::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(520px 360px at 20% 20%, rgba(255,255,255,.18), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .finalCard h2{
      margin: 6px 0 14px;
      font-family: var(--serif);
      font-size: 36px;
      font-weight: 900;
      letter-spacing: -0.02em;
      position:relative;
    }
    .lace{
      width: 220px;
      height: 160px;
      margin: 0 auto 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.92);
      position:relative;
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      overflow:hidden;
    }
    .lace::before{
      content:"";
      position:absolute; inset:10px;
      border-radius: 999px;
      border: 2px dashed rgba(225,23,79,.35);
    }
    .lace .txt{
      position:absolute; inset:0;
      display:grid; place-items:center;
      font-family: var(--serif);
      font-weight: 900;
      color: rgba(225,23,79,.92);
      font-size: 26px;
      letter-spacing: -0.02em;
      padding: 0 12px;
      text-align:center;
    }
    .initials{
      display:flex; justify-content:center; gap:10px;
      margin-top: -12px; position:relative;
    }
    .init{
      width: 58px; height: 44px;
      border-radius: 14px;
      background: rgba(255,255,255,.92);
      color: rgba(225,23,79,.92);
      font-weight: 1000;
      display:grid; place-items:center;
      box-shadow: 0 14px 30px rgba(0,0,0,.16);
      border: 1px solid rgba(255,255,255,.55);
      font-family: var(--serif);
      font-size: 22px;
    }
    .finalCard p{
      margin: 14px 0 0;
      position:relative;
      font-family: var(--serif);
      font-size: 16px;
      line-height: 1.55;
      opacity:.95;
      white-space: pre-line;
    }
    .finalGlow{
      position:absolute; inset:-20%;
      background:
        radial-gradient(700px 420px at 50% 35%, rgba(255,255,255,.14), transparent 60%),
        radial-gradient(700px 420px at 30% 70%, rgba(255,255,255,.10), transparent 65%);
      opacity:0;
      pointer-events:none;
    }
    .finalOn .finalGlow{
      animation: glowIn 1.2s var(--ease) both;
    }
    @keyframes glowIn{
      0%{ opacity:0; transform: scale(.98); }
      100%{ opacity:1; transform: scale(1.02); }
    }

    .heartFX{
      position: fixed;
      top: -24px;
      z-index: 60;
      pointer-events:none;
      will-change: transform, opacity;
      filter: drop-shadow(0 12px 18px rgba(0,0,0,.35));
    }

    .miniFooter{
      text-align:center;
      margin-top: 14px;
      font-size: 11px;
      letter-spacing:.16em;
      text-transform: uppercase;
      color: rgba(42,31,36,.45);
      opacity:.8;
    }

    /* NAV */
    .nav{
      position:absolute;
      left:0; right:0; bottom:0;
      padding: 12px 16px;
      display:flex;
      justify-content:space-between;
      gap: 12px;
      background: linear-gradient(to top, rgba(255,255,255,.80), rgba(255,255,255,0));
      backdrop-filter: blur(6px);
      border-top: 1px solid rgba(225,23,79,.10);
      z-index: 10;
    }
    .nav button{
      flex:1;
      max-width: 220px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(225,23,79,.35);
      background: rgba(255,255,255,.60);
      color: rgba(225,23,79,.92);
      font-weight: 900;
      letter-spacing: .03em;
      cursor:pointer;
      box-shadow: 0 12px 24px rgba(0,0,0,.06);
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s var(--ease), filter .2s var(--ease), opacity .2s var(--ease);
    }
    .nav button:active{ transform: scale(.985); }
    .nav button[disabled]{ opacity:.40; cursor:not-allowed; }

    .nav button.hidden{
      opacity:0;
      pointer-events:none;
      transform: translateY(6px);
    }
  </style>
</head>

<body>
  <div class="bg-aurora"></div>
  <div class="bg-grain"></div>
  <div class="petals" id="petals" aria-hidden="true"></div>

  <!-- INTRO -->
  <section class="intro" id="intro" aria-label="Inicio con carta">
    <div class="introCard" id="introCard">
      <div class="introTitle">Te tengo una sorpresa‚Ä¶ üíå</div>
      <div class="introSub">Para descubrirla, toca el coraz√≥n</div>

      <div class="envWrap">
        <div class="letter" id="letter">
          <h2>Para ti üíó</h2>
          <p>
            Esto es solo el comienzo‚Ä¶<br/>
            (toca el coraz√≥n para abrir)
          </p>
        </div>

        <button class="heartBtn" id="heartBtn" aria-label="Abrir sobre">
          <div class="heart"></div>
        </button>

        <div class="envelope" aria-hidden="true">
          <div class="flapTop" id="flap"></div>
          <div class="flapLeft"></div>
          <div class="flapRight"></div>
          <div class="flapBottom"></div>
          <div class="seal"><span>LOVE</span></div>
        </div>

        <div class="softShadow"></div>
      </div>

      <div class="introHint">‚ú® Se abre con amor</div>
    </div>
  </section>

  <!-- REVISTA -->
  <div class="app">
    <div class="mag" role="application" aria-label="Valentine Edition">
      <div class="pages">

        <!-- PAGE 1 -->
        <section class="page active" data-page="0" aria-label="Portada">
          <div class="topline">
            <span>Edici√≥n especial</span>
            <span>Valentine</span>
            <span>Febrero</span>
          </div>

          <div class="masthead">Valentine Edition</div>
          <div class="rule"></div>

          <div class="subhead-row">
            <span>14 de febrero</span>
            <span>Me gustas mucho</span>
            <span>Juntos por siempre</span>
          </div>

          <div class="rule thin"></div>

          <div class="bigQuestion">
            <div class="small">Will you be my</div>
            <div class="script">Valentine?</div>
          </div>

          <div class="centerNote">
            Distribuci√≥n: <b>exclusiva</b> para la persona m√°s especial üíó
          </div>

          <div class="columns">
            <div class="article">
              <div class="kicker">
                <span>Diario de amor</span>
                <span>San Valentine</span>
              </div>
              <p>
Despu√©s de que el mundo hiciera su magia y los caminos se cruzaran,
qued√≥ claro algo: quiero vivir este 14 de febrero contigo.

Mi coraz√≥n ‚Äîla √∫nica fuente confiable en estos temas‚Äî lo tiene claro desde hace tiempo.

Quiero un San Valent√≠n a tu lado, lleno de amor, risas sinceras
y momentos que se queden grabados.
              </p>
            </div>

            <div class="photo">
              <div class="frame">
                <small>
                  (Aqu√≠ va una foto de ustedes üíû)<br/>
                  Luego la ponemos.
                </small>
              </div>
              <div class="overlayBtn">¬øAceptas la misi√≥n de ser mi San Valent√≠n?</div>
            </div>
          </div>

          <div class="tickets">
            <div class="ticket">
              <div class="stub">San Valent√≠n</div>
              <div class="body">
                <div class="label">Cup√≥n para:</div>
                <div class="value">Una cita sorpresa ‚ú®</div>
              </div>
            </div>
            <div class="ticket">
              <div class="stub">San Valent√≠n</div>
              <div class="body">
                <div class="label">Cup√≥n para:</div>
                <div class="value">Una ida al cine üé¨</div>
              </div>
            </div>
          </div>

          <div class="miniFooter">Valentine Edition</div>
        </section>

        <!-- PAGE 2 (Matriz) -->
        <section class="page" data-page="1" aria-label="Razones">
          <div class="topline">
            <span>Edici√≥n especial</span>
            <span>Me gustas mucho</span>
            <span>Juntos por siempre</span>
          </div>
          <div class="rule"></div>

          <div class="reasonsHead">
            <div class="reasonsTitle">
              <span class="n">5</span>
              <span class="t"> Razones</span>
            </div>
            <div class="reasonsScript">por las que eres mi elecci√≥n perfecta</div>
          </div>

          <!-- 3x3 -->
          <div class="grid9" aria-label="Matriz de razones">
            <div class="cell9">
              <div class="cellNum">1</div>
              <div class="cellTxt">Tienes la sonrisa m√°s linda del universo.</div>
            </div>
            <div class="cell9 heartOnly"><div class="bigHeart">‚ù§</div></div>
            <div class="cell9">
              <div class="cellNum">3</div>
              <div class="cellTxt">Contigo, cualquier d√≠a se siente especial.</div>
            </div>

            <div class="cell9 heartOnly"><div class="bigHeart">‚ù§</div></div>

            <!-- ‚úÖ CENTRO: sin coraz√≥n -->
            <div class="cell9 center">
              <div class="cellNum">2</div>
              <div class="cellTxt">Haces que mi coraz√≥n lata m√°s r√°pido cada vez que te pienso.</div>
            </div>

            <div class="cell9 heartOnly"><div class="bigHeart">‚ù§</div></div>

            <div class="cell9">
              <div class="cellNum">4</div>
              <div class="cellTxt">Eres mi persona favorita para compartir momentos.</div>
            </div>
            <div class="cell9 heartOnly"><div class="bigHeart">‚ù§</div></div>
            <div class="cell9">
              <div class="cellNum">5</div>
              <div class="cellTxt">No imagino a nadie m√°s a mi lado en este San Valent√≠n.</div>
            </div>
          </div>

          <div class="signals">
            <div class="signalsKicker">SE√ëALES DE QUE</div>
            <h3>Debes decir ‚ÄúS√≠‚Äù</h3>
            <p>Estudios recientes han demostrado que:</p>
          </div>

          <div class="redBoxes">
            <div class="red">Si est√°s leyendo esto, significa que el destino nos ha unido.</div>
            <div class="red">Si has sonre√≠do al menos una vez, es una se√±al obvia.</div>
            <div class="red">Si te gusta el romance, somos un match perfecto.</div>
          </div>

          <div class="miniFooter">Valentine Edition</div>
        </section>

        <!-- PAGE 3 (Pregunta) -->
        <section class="page" data-page="2" aria-label="La gran pregunta">
          <div class="topline">
            <span>Edici√≥n especial</span>
            <span>Me gustas mucho</span>
            <span>Juntos por siempre</span>
          </div>
          <div class="rule"></div>

          <div class="grand">La gran pregunta</div>

          <div class="paragraph">
Despu√©s de analizar los hechos, recopilar datos
y comprobar la qu√≠mica innegable entre nosotros‚Ä¶

As√≠ que ahora s√≠‚Ä¶

con el coraz√≥n en la mano
y una sonrisa nerviosa:
          </div>

          <div class="bigAsk">
            <div class="top">¬øQuieres ser mi</div>
            <div class="bottom">San Valent√≠n?</div>
          </div>

          <div class="ask">Elige tu respuesta:</div>

          <div class="btnStage" id="btnStage">
            <button class="choice yes" id="yesBtn" type="button">S√ç üíñ</button>
            <button class="choice no" id="noBtn" type="button" aria-label="No (imposible)">NO üôà</button>
          </div>

          <div class="miniFooter">Valentine Edition</div>
        </section>

        <!-- PAGE 4 (Final) -->
        <section class="page" data-page="3" aria-label="Confirmado" id="finalPage">
          <div class="final">
            <div class="finalCard" id="finalCard">
              <div class="finalGlow" aria-hidden="true"></div>
              <h2>Confirmado oficialmente:</h2>

              <div class="lace">
                <div class="txt">Eres mi San Valent√≠n.</div>
              </div>

              <div class="initials">
                <div class="init">A</div>
                <div class="init">J</div>
              </div>

              <p>
Gracias por decir que s√≠.
Prep√°rate para un d√≠a bonito,
sonrisas inevitables
y recuerdos que se van a quedar.
              </p>
            </div>

            <div class="miniFooter" style="margin-top:16px;">Valentine Edition</div>
          </div>
        </section>

      </div>

      <div class="nav" aria-label="Navegaci√≥n">
        <button id="prev" type="button">PAG. ANTERIOR</button>
        <button id="next" type="button">PAG. SIGUIENTE</button>
      </div>
    </div>
  </div>

  <script>
    /* ========= UTIL ========= */
    const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    function rand(min, max){ return Math.random() * (max - min) + min; }
    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    /* ========= P√âTALOS ========= */
    const petals = document.getElementById("petals");
    const COUNT = 70;
    for(let i=0; i<COUNT; i++){
      const p = document.createElement("div");
      p.className = "petal";
      const r = Math.random();
      if(r < 0.22) p.classList.add("white");
      else if(r < 0.52) p.classList.add("soft");

      const size = rand(10, 22);
      p.style.width = size + "px";
      p.style.height = size + "px";
      p.style.left = rand(0, 100) + "vw";
      p.style.top  = rand(-30, 110) + "vh";
      p.style.setProperty("--x", rand(-40, 40) + "px");
      p.style.setProperty("--drift", rand(-220, 220) + "px");
      p.style.setProperty("--op", rand(.35, .95));
      p.style.animationDuration = rand(6.5, 13.5) + "s";
      p.style.animationDelay = rand(-13.5, 0) + "s";
      petals.appendChild(p);
    }

    /* ========= INTRO: ABRIR CARTA ========= */
    const intro = document.getElementById("intro");
    const introCard = document.getElementById("introCard");
    const heartBtn = document.getElementById("heartBtn");

    let opened = false;
    heartBtn.addEventListener("click", () => {
      if(opened) return;
      opened = true;
      introCard.classList.add("opened");
      heartsBurst(18);

      setTimeout(() => intro.classList.add("hide"), 850);
      setTimeout(() => show(0, "right"), 900);
    });

    /* ========= P√ÅGINAS + NAV ========= */
    const pages = [...document.querySelectorAll(".page")];
    const prev = document.getElementById("prev");
    const next = document.getElementById("next");
    let current = 0;

    function clearAnim(p){
      p.classList.remove("anim-in-right","anim-out-left","anim-in-left","anim-out-right");
    }

    function updateNav(){
      prev.disabled = current === 0;

      // Ocultar "SIGUIENTE" en la pen√∫ltima p√°gina (la de la pregunta = index 2)
      if(current === 2){
        next.classList.add("hidden");
        next.disabled = true;
      }else{
        next.classList.remove("hidden");
        next.disabled = current === pages.length - 1;
      }
    }

    function show(i, dir="right"){
      const target = Math.max(0, Math.min(pages.length-1, i));
      if(target === current) return;

      const out = pages[current];
      const inc = pages[target];
      pages.forEach(clearAnim);

      out.classList.add("active");
      inc.classList.add("active");

      if(dir === "right"){
        out.classList.add("anim-out-left");
        inc.classList.add("anim-in-right");
      }else{
        out.classList.add("anim-out-right");
        inc.classList.add("anim-in-left");
      }

      setTimeout(() => {
        pages.forEach((p, idx) => p.classList.toggle("active", idx === target));
        clearAnim(out); clearAnim(inc);
        current = target;
        pages[current].scrollTop = 0;

        updateNav();
        if(current === 3) romanticFinal();
      }, 420);
    }

    prev.addEventListener("click", () => show(current - 1, "left"));
    next.addEventListener("click", () => show(current + 1, "right"));
    updateNav();

    // swipe m√≥vil
    let startX = null;
    document.querySelector(".mag").addEventListener("touchstart", (e)=>{
      if(e.touches.length === 1) startX = e.touches[0].clientX;
    }, {passive:true});
    document.querySelector(".mag").addEventListener("touchend", (e)=>{
      if(startX == null) return;
      const endX = e.changedTouches[0].clientX;
      const dx = endX - startX;
      startX = null;
      if(Math.abs(dx) < 60) return;
      if(dx < 0) show(current + 1, "right");
      else show(current - 1, "left");
    }, {passive:true});

    /* ========= NO ULTRA (huye del puntero + m√°s distancia + m√°s r√°pido) ========= */
    const btnStage = document.getElementById("btnStage");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");

    let dodges = 0;
    let animatingNo = false;
    let noX = 0;
    let noY = 0;

    function stageLimits(){
      const s = btnStage.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const pad = 12;

      // mitad derecha
      const minX = s.width * 0.56;
      const maxX = s.width - b.width - pad;

      const minY = pad;
      const maxY = s.height - b.height - pad;

      return { s, b, pad, minX, maxX, minY, maxY };
    }

    function setNoPos(x, y){
      noX = x; noY = y;
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    function placeNoInitial(){
      const { s, minX, maxX, minY, maxY } = stageLimits();
      const x = clamp(s.width * 0.66, minX, maxX);
      const y = clamp(s.height * 0.50, minY, maxY);
      setNoPos(x, y);
    }

    // spring r√°pido (m√°s agresivo)
    function springTo(targetX, targetY){
      if(prefersReduced){ setNoPos(targetX, targetY); return; }
      if(animatingNo) return;
      animatingNo = true;

      let vx = 0, vy = 0;
      const stiffness = 0.20;  // m√°s r√°pido
      const damping = 0.72;    // menos amortiguaci√≥n = m√°s huye
      const snap = 0.7;

      function step(){
        const dx = targetX - noX;
        const dy = targetY - noY;

        vx = (vx + dx * stiffness) * damping;
        vy = (vy + dy * stiffness) * damping;

        noX += vx;
        noY += vy;

        const rot = clamp(vx * 0.35, -14, 14);
        noBtn.style.transform = `translate(0,0) rotate(${rot}deg)`;

        noBtn.style.left = noX + "px";
        noBtn.style.top  = noY + "px";

        if(Math.abs(dx) < snap && Math.abs(dy) < snap && Math.abs(vx) < 0.55 && Math.abs(vy) < 0.55){
          noBtn.style.transform = `translate(0,0) rotate(0deg)`;
          animatingNo = false;
          return;
        }
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    // huye del puntero (direccional) + distancia grande
    function dodgeNo(ev){
      const { s, b, minX, maxX, minY, maxY } = stageLimits();

      const px = ev ? (ev.clientX - s.left) : (s.width * 0.70);
      const py = ev ? (ev.clientY - s.top)  : (s.height * 0.50);

      const cx = noX + b.width/2;
      const cy = noY + b.height/2;

      let dx = cx - px;
      let dy = cy - py;
      const len = Math.hypot(dx, dy) || 1;
      dx /= len; dy /= len;

      // MUCHA distancia + un poco de aleatoriedad
      const flee = 240 + Math.random() * 260; // 240‚Äì500px
      let tx = (noX + dx * flee) + (Math.random()*2 - 1) * 80;
      let ty = (noY + dy * flee) + (Math.random()*2 - 1) * 55;

      tx = clamp(tx, minX, maxX);
      ty = clamp(ty, minY, maxY);

      springTo(tx, ty);

      dodges++;
      if(dodges === 3) noBtn.textContent = "¬øEh? üò≥";
      if(dodges === 6) noBtn.textContent = "Nope üòà";
      if(dodges === 9) noBtn.textContent = "Imposible üôÖ";
      if(dodges >= 12) noBtn.textContent = "üòÖ";
    }

    // huye al acercarte (m√°s dif√≠cil)
    noBtn.addEventListener("pointermove", (e)=>{ dodgeNo(e); });
    noBtn.addEventListener("pointerdown", (e)=>{ e.preventDefault(); e.stopPropagation(); dodgeNo(e); });
    noBtn.addEventListener("mouseenter", (e)=>{ dodgeNo(e); });
    noBtn.addEventListener("focus", (e)=>{ dodgeNo(e); });

    noBtn.addEventListener("touchstart", (e)=>{
      e.preventDefault(); e.stopPropagation();
      const t = e.touches[0];
      dodgeNo({ clientX: t.clientX, clientY: t.clientY });
    }, {passive:false});

    window.addEventListener("resize", placeNoInitial);
    placeNoInitial();

    /* ========= S√ç: pasa al final ========= */
    function goFinal(){
      heartsBurst(26);
      show(3, "right");
    }
    yesBtn.addEventListener("click", (e)=>{ e.preventDefault(); e.stopPropagation(); goFinal(); });
    yesBtn.addEventListener("pointerup", (e)=>{ e.preventDefault(); e.stopPropagation(); goFinal(); });

    /* ========= EFECTO ROM√ÅNTICO FINAL ========= */
    function romanticFinal(){
      const finalCard = document.getElementById("finalCard");
      finalCard.classList.add("finalOn");
      heartsBurst(48);

      const lace = finalCard.querySelector(".lace");
      if(!prefersReduced){
        lace.animate(
          [{transform:"scale(1)"},{transform:"scale(1.03)"},{transform:"scale(1)"}],
          {duration: 1200, easing:"cubic-bezier(.2,.7,.2,1)"}
        );
      }
    }

    /* ========= CORAZONES / BRILLOS ========= */
    function heartsBurst(amount = 20){
      if(prefersReduced) return;

      for (let i=0; i<amount; i++){
        const el = document.createElement("div");
        el.className = "heartFX";
        el.textContent = Math.random() < .72 ? "üíñ" : (Math.random() < .5 ? "üíò" : "‚ú®");
        el.style.left = (Math.random() * 100) + "vw";
        el.style.fontSize = (14 + Math.random() * 28) + "px";
        el.style.opacity = "1";

        const drift = (Math.random()*2 - 1) * 300;
        const rotate = (Math.random()*2 - 1) * 620;
        const fall = 110 + Math.random() * 30;
        const dur = 1200 + Math.random() * 900;

        document.body.appendChild(el);

        el.animate([
          { transform: "translate3d(0,0,0) rotate(0deg)", opacity: 1 },
          { transform: `translate3d(${drift}px, ${fall}vh, 0) rotate(${rotate}deg)`, opacity: 0 }
        ], { duration: dur, easing: "cubic-bezier(.2,.7,.2,1)" });

        setTimeout(()=> el.remove(), dur + 80);
      }
    }
  </script>
</body>
</html>
